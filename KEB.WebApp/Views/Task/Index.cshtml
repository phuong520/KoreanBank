@model IEnumerable<KEB.Application.DTOs.ImportQuestionTaskDTO.TaskGeneralDisplayDTO>

@{
    ViewData["Title"] = "Nhiệm Vụ Câu Hỏi";
    int index = 1;
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<div class="row">
    <div class="col-md-12">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h4 class="fw-bold">Nhiệm Vụ Câu Hỏi</h4>
            <a class="btn btn-primary" href="/Task/Create">Tạo Mới</a>
        </div>

        <input type="text" class="form-control mb-3" placeholder="Tìm kiếm..." />

        <table class="table table-bordered table-hover text-center align-middle">
            <thead class="table-light">
                <tr>
                    <th>STT</th>
                    <th>Nhiệm Vụ</th>
                    <th>Người Thực Hiện</th>
                    <th>Hạn</th>
                    <th>Số Câu Hỏi</th>
                    <th>Số Câu Đã Nhập</th>
                    <th>Trạng Thái</th>
                    <th>Hoạt Động</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var task in Model)
                {
                    var isCompleted = task.NumberOfAddedQuestions >= task.NumberOfQuestions;
                    var statusColor = isCompleted ? "text-success" : "text-danger";
                    var statusText = isCompleted ? "Hoàn Thành" : "Chưa Hoàn Thành";

                    <tr>
                        <td>@(index++)</td>
                        <td>@task.TaskName</td>
                        <td>@task.AssigneeName</td>
                        <td>@task.Deadline.ToString("dd/MM/yyyy")</td>
                        <td>@task.NumberOfQuestions</td>
                        <td>@task.NumberOfAddedQuestions</td>
                        <td class="@statusColor fw-bold">@statusText</td>
                        <td>
                            <a href="/Task/Details/@task.Id" class="btn btn-sm btn-info me-1" title="Chi tiết">
                                <i class="bi bi-info-circle"></i>
                            </a>
                            <a href="/Task/Delete/@task.Id" class="btn btn-sm btn-danger" title="Xóa">
                                <i class="bi bi-trash"></i>
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>

        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center">
                <li class="page-item disabled"><a class="page-link">1</a></li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
            </ul>
        </nav>
    </div>
</div>
